"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[39447],{651510:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.StatusTab=t.PrivacyTab=void 0;t.useActiveGuildThreads=function(e){var t=(0,o.useStateFromStoresArray)([f.default,p.default,d.default],(function(){return(0,l.default)(p.default.getThreadsForGuild(e)).values().map((function(e){var t=e.id;return d.default.getChannel(t)})).filter(c.isNotNullish).filter((function(e){return f.default.can(g.Permissions.VIEW_CHANNEL,e)})).map((function(e){return e.id})).value()}),[]);return u.useMemo((function(){return(0,l.default)(t).sort((function(e,t){return v.default.compare(s.default.lastMessageId(e),s.default.lastMessageId(t))})).reverse().value()}),[t])};t.useActiveThreadIds=A;t.useActiveThreads=function(e){var t=A(e),r=(u=(0,o.useStateFromStores)([y.default],(function(){return l.default.partition(t,(function(e){return y.default.hasJoined(e)}))}),[t],o.statesWillNeverBeEqual),i=2,function(e){
if(Array.isArray(e))return e}(u)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,u=[],l=!0,o=!1;try{for(r=r.call(e);!(l=(a=r.next()).done);l=!0){u.push(a.value);if(t&&u.length===t)break}}catch(e){o=!0;n=e}finally{try{l||null==r.return||r.return()}finally{if(o)throw n}}return u}}(u,i)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(u,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],n=r[1];var u,i;return{joinedThreadIds:a,unjoinedThreadIds:n}};t.useArchivedThreads=function(e,t,r){
var a=t===n.Public?S.ArchivedThreadListType.ALL_PUBLIC_THREADS:r?S.ArchivedThreadListType.ALL_PRIVATE_THREADS:S.ArchivedThreadListType.MY_PRIVATE_THREADS,s=u.useCallback((function(t){f.default.can(g.Permissions.READ_MESSAGE_HISTORY,e)&&m.default.loadArchivedThreads(e.guild_id,e.id,a,t)}),[e,a]);u.useEffect((function(){return s()}),[s]);u.useEffect((function(){i.default.resort(e.id)}),[e.id]);var c=(0,o.useStateFromStoresObject)([h.default],(function(){return{canLoadMore:h.default.canLoadMore,loading:h.default.isLoading(e.id,a)}})),v=c.canLoadMore,p=c.loading;return{threadIds:(0,o.useStateFromStoresArray)([h.default,d.default,f.default],(function(){return(0,l.default)(h.default.getThreads(e.id,a)).filter((function(e){var t=d.default.getChannel(e);return null!=t&&f.default.can(g.Permissions.VIEW_CHANNEL,t)})).value()})),canLoadMore:v,loading:p,loadMore:s}};t.useTrackThreadBrowserTab=function(e,t){
var r=e?"Active Threads":(null==t?void 0:t.tab)===n.Public?"Public Archived Threads":(null==t?void 0:t.moderatorView)?"All Private Archived Threads":"My Private Archived Threads";u.useEffect((function(){(0,b.trackThreadBrowserTab)(r)}),[r])};var a,n,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=n?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}a.default=e;r&&r.set(e,a);return a}(r(667294)),l=T(r(496486)),o=r(536211),i=T(r(649563)),d=T(r(644263)),f=T(r(689389)),s=T(r(191391)),c=r(71246),v=T(r(71636)),p=T(r(782270)),h=T(r(612548)),y=T(r(730451)),m=T(r(887174)),b=r(566142),S=r(64072),g=r(478036);function T(e){return e&&e.__esModule?e:{default:e}}function E(e){
if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}t.StatusTab=a;!function(e){e[e.Active=0]="Active";e[e.Archived=1]="Archived"}(a||(t.StatusTab=a={}));t.PrivacyTab=n;!function(e){e[e.Public=0]="Public";e[e.Private=1]="Private"}(n||(t.PrivacyTab=n={}));function A(e){var t=(0,o.useStateFromStoresArray)([f.default,p.default,d.default],(function(){return(0,l.default)(p.default.getThreadsForGuild(e.guild_id)).values().map((function(e){var t=e.id;return d.default.getChannel(t)})).filter(c.isNotNullish).filter((function(t){return!0===window._THREAD_BROWSER_ALL_CHANNELS||t.parent_id===e.id})).filter((function(e){return f.default.can(g.Permissions.VIEW_CHANNEL,e)})).map((function(e){return e.id})).value()}),[]);return u.useMemo((function(){return(0,l.default)(t).sort((function(e,t){
return v.default.compare(s.default.lastMessageId(e),s.default.lastMessageId(t))})).reverse().value()}),[t])}},11258:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=m;var a,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=n?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}a.default=e;r&&r.set(e,a);return a}(r(667294)),u=p(r(294184)),l=p(r(776360)),o=p(r(521358)),i=r(651510),d=p(r(895377)),f=p(r(903086)),s=r(330042),c=p(r(247001)),v=p(r(484317));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function y(e,t,r,n){
a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=n;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var d in u)void 0===t[d]&&(t[d]=u[d]);else t||(t=u||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function m(e){var t=e.channel,r=e.startThread,a=e.gotoThread,l=(0,i.useActiveThreads)(t),p=l.joinedThreadIds,h=l.unjoinedThreadIds,m=n.useCallback((function(e){return 0===e.section?y(b,{text:c.default.Messages.THREAD_BROWSER_JOINED_HEADER.format({count:p.length})},e.section):y(b,{text:c.default.Messages.THREAD_BROWSER_OTHER_HEADER.format({count:h.length}),divider:p.length>0},e.section)}),[p.length,h.length]),S=n.useCallback((function(e){return 1===e&&p.length>0?64:32}),[p.length]),g=n.useCallback((function(e){var t=0===e.section?p[e.row]:h[e.row];return y(f.default,{threadId:t,
type:s.RowType.Active,gotoThread:a},e.section+"-"+e.row)}),[p,h,a]);return 0===p.length&&0===h.length?y(d.default,{channel:t,header:c.default.Messages.THREAD_BROWSER_EMPTY_STATE_ACTIVE_HEADER,startThread:r}):y(o.default,{className:(0,u.default)(v.default.list,v.default.activeThreadsList),fade:!0,sections:[p.length,h.length],sectionHeight:S,rowHeight:80,renderRow:g,renderSection:m,chunkSize:20})}m.displayName="ActiveThreadsTab";function b(e){var t=e.text,r=e.divider;return n.createElement(n.Fragment,null,r?y("div",{className:v.default.divider}):null,y(l.default,{color:l.default.Colors.HEADER_SECONDARY,size:l.default.Sizes.SIZE_12,className:v.default.sectionHeader},void 0,t))}},648794:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=R
;var a,n=_(r(667294)),u=T(r(294184)),l=T(r(644263)),o=T(r(789446)),i=T(r(80828)),d=_(r(186465)),f=T(r(730977)),s=T(r(347114)),c=T(r(776360)),v=T(r(521358)),p=r(651510),h=r(819235),y=T(r(895377)),m=T(r(903086)),b=r(330042),S=T(r(247001)),g=T(r(484317));function T(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=n?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}a.default=e;r&&r.set(e,a);return a}function A(){A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]
;for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};return A.apply(this,arguments)}function M(e,t,r,n){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=n;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var d in u)void 0===t[d]&&(t[d]=u[d]);else t||(t=u||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,u=[],l=!0,o=!1;try{for(r=r.call(e);!(l=(a=r.next()).done);l=!0){u.push(a.value);if(t&&u.length===t)break}}catch(e){o=!0;n=e}finally{try{l||null==r.return||r.return()}finally{if(o)throw n}}return u}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t)
;var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function R(e){var t=e.channel,r=e.startThread,a=e.gotoThread,T=w(n.useState(p.PrivacyTab.Public),2),E=T[0],_=T[1],O=w(n.useState(!1),2),R=O[0],P=O[1],N=(0,h.useIsThreadModerator)(t),I=R&&N,C=E===p.PrivacyTab.Private&&!I;(0,p.useTrackThreadBrowserTab)(!1,{tab:E,moderatorView:I});var j=(0,p.useArchivedThreads)(t,E,I),k=j.threadIds,D=j.canLoadMore,H=j.loading,W=j.loadMore,B=n.useRef(null),L=n.useMemo((function(){var e,t;return M("div",{className:g.default.controls
},void 0,M(d.default,{selectedItem:E,type:d.Types.TOP_PILL,onItemSelect:_,className:g.default.tabBar},"tabs",M(d.Item,{id:p.PrivacyTab.Public,className:(0,u.default)(g.default.tab,(e={},e[g.default.active]=E===p.PrivacyTab.Public,e))},void 0,S.default.Messages.THREAD_BROWSER_PUBLIC),M(d.Item,{id:p.PrivacyTab.Private,className:(0,u.default)(g.default.tab,(t={},t[g.default.active]=E===p.PrivacyTab.Private,t))},void 0,S.default.Messages.THREAD_BROWSER_PRIVATE)),N&&E===p.PrivacyTab.Private?M("div",{className:g.default.moderatorView},void 0,M(o.default,{value:R,onChange:function(e,t){return P(t)},className:g.default.checkbox,type:o.default.Types.INVERTED,size:20}),M(c.default,{size:c.default.Sizes.SIZE_16,color:c.default.Colors.INTERACTIVE_NORMAL},void 0,S.default.Messages.MODERATOR_VIEW,M(f.default,{text:S.default.Messages.MODERATOR_VIEW_TOOLTIP},void 0,(function(e){return n.createElement(s.default,A({},e,{className:g.default.infoIcon}))})))):null)}),[E,N,R]),x=n.useCallback((function(){
return L}),[L]),F=n.useCallback((function(e){return M(m.default,{threadId:k[e.row],type:C?b.RowType.MyArchived:b.RowType.AllArchived,gotoThread:a},e.section+"-"+e.row)}),[k,C,a]),z=n.useCallback((function(){var e,t,r=null===(e=B.current)||void 0===e?void 0:e.getScrollerState();if(null!=r){var a=l.default.getChannel(k[k.length-1]);if(null!=a){var n=C?a.id:null===(t=a.threadMetadata)||void 0===t?void 0:t.archiveTimestamp;if(null!=n){var u=r.scrollTop+r.scrollHeight;r.offsetHeight-u<200&&W(n)}}}}),[k,W,C]);return 0===k.length?M("div",{className:g.default.list},void 0,L,H?M(i.default,{className:g.default.spinner}):M(y.default,{channel:t,header:S.default.Messages.THREAD_BROWSER_EMPTY_STATE_ARCHIVED_HEADER,startThread:r})):n.createElement(v.default,{ref:B,className:g.default.list,fade:!0,sections:[k.length],sectionHeight:64,rowHeight:80,renderRow:F,renderSection:x,chunkSize:20,onScroll:D?z:void 0})}R.displayName="ArchivedThreadsTab"},789317:(e,t,r)=>{Object.defineProperty(t,"__esModule",{
value:!0});t.default=y;var a,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=n?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}a.default=e;r&&r.set(e,a);return a}(r(667294)),u=v(r(294184)),l=v(r(644263)),o=v(r(521358)),i=v(r(895377)),d=v(r(903086)),f=r(330042),s=v(r(247001)),c=v(r(484317));function v(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function h(e,t,r,n){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=n;else if(l>1){
for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var d in u)void 0===t[d]&&(t[d]=u[d]);else t||(t=u||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function y(e){var t=e.channel,r=e.threadIds,a=e.startThread,v=e.gotoThread,p=n.useCallback((function(e){var t,a;return h(d.default,{threadId:r[e.row],type:(null===(t=l.default.getChannel(r[e.row]))||void 0===t||null===(a=t.threadMetadata)||void 0===a?void 0:a.archived)?f.RowType.AllArchived:f.RowType.Active,gotoThread:v},e.section+"-"+e.row)}),[r,v]);return 0===r.length?h(i.default,{channel:t,header:s.default.Messages.THREAD_BROWSER_EMPTY_STATE_ACTIVE_HEADER,startThread:a}):h(o.default,{className:(0,u.default)(c.default.list,c.default.activeThreadsList),fade:!0,sections:[r.length],sectionHeight:0,rowHeight:80,renderRow:p,renderSection:function(){return null},chunkSize:20})}y.displayName="SearchThreadsTab"},39447:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0})
;t.default=L;var a,n=C(r(667294)),u=N(r(294184)),l=r(536211),o=N(r(118915)),i=N(r(636602)),d=r(391869),f=N(r(689389)),s=N(r(956117)),c=N(r(16941)),v=N(r(665759)),p=C(r(186465)),h=N(r(259530)),y=N(r(348763)),m=N(r(830759)),b=N(r(971639)),S=N(r(887174)),g=r(651510),T=r(819235),E=r(566142),_=N(r(11258)),A=N(r(648794)),M=N(r(789317)),w=r(64072),O=r(770348),R=N(r(247001)),P=N(r(386545));function N(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=n?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}a.default=e;r&&r.set(e,a)
;return a}function j(e,t,r,a,n,u,l){try{var o=e[u](l),i=o.value}catch(e){r(e);return}o.done?t(i):Promise.resolve(i).then(a,n)}function k(e,t,r,n){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=n;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var d in u)void 0===t[d]&&(t[d]=u[d]);else t||(t=u||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,u=[],l=!0,o=!1;try{for(r=r.call(e);!(l=(a=r.next()).done);l=!0){u.push(a.value);if(t&&u.length===t)break}}catch(e){o=!0;n=e}finally{try{l||null==r.return||r.return()}finally{if(o)throw n}}return u}(e,t)||function(e,t){if(!e)return
;if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var W=k(y.default,{width:20,height:20}),B=k(h.default,{});function L(e){var t,r,a,v,h,y,N,I,C,H,L,F,z,V,$,Y,U,Z,G=e.channel,q=e.className,J=e.onClose,K=D(n.useState(g.StatusTab.Active),2),Q=K[0],X=K[1],ee=D(n.useState(!1),2),te=ee[0],re=ee[1],ae=(0,l.useStateFromStores)([f.default],(function(){return f.default.can(O.Permissions.READ_MESSAGE_HISTORY,G)})),ne=(0,T.useCanStartThread)(G),ue=function(){J()
;S.default.openThreadSidebarForCreating(G,void 0,"Thread Browser Empty State")},le=n.useCallback((function(e,t){J();t?S.default.openThreadSidebarForViewing(e):(0,d.transitionToThread)(e,w.OpenThreadAnalyticsLocations.BROWSER)}),[J]),oe=(a=G.guild_id,v=G.id,h=D(n.useState(""),2),y=h[0],N=h[1],I=D(n.useState(!1),2),C=I[0],H=I[1],L=D(n.useState(!1),2),F=L[0],z=L[1],V=D(n.useState([]),2),$=V[0],Y=V[1],U=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r,n,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=y&&""!==y){e.next=2;break}return e.abrupt("return");case 2:if(!C){e.next=4;break}return e.abrupt("return");case 4:H(!0);e.prev=5;e.next=8;return o.default.get({url:O.Endpoints.THREAD_SEARCH(v),query:{name:y}});case 8:t=e.sent;r=t.body;n=r.threads;u=r.members;i.default.dispatch({type:O.ActionTypes.LOAD_THREADS_SUCCESS,threads:n,members:u,guildId:a,channelId:v});z(!0);Y(n.map((function(e){return e.id})));case 15:e.prev=15;H(!1)
;return e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[5,,15,18]])})),function(){var t=this,r=arguments;return new Promise((function(a,n){var u=e.apply(t,r);function l(e){j(u,a,n,l,o,"next",e)}function o(e){j(u,a,n,l,o,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}(),Z=function(e){N(e);0===e.length&&z(!1)},{query:y,setQuery:Z,isLoading:C,hasResults:F,submit:U,results:$});n.useEffect((function(){ae||Q===g.StatusTab.Active||X(g.StatusTab.Active)}),[ae,Q]);n.useEffect((function(){Q===g.StatusTab.Active&&(0,E.trackThreadBrowserTab)("Active Threads")}),[Q]);return k("div",{className:(0,u.default)(q,P.default.container)},void 0,k("div",{className:P.default.header},void 0,k(m.default,{className:P.default.threadIcon}),k(b.default,{size:b.default.Sizes.SIZE_16,className:P.default.title},void 0,R.default.Messages.THREAD_BROWSER_TITLE),ae?te?n.createElement(n.Fragment,null,k("div",{className:P.default.divider
}),n.createElement(x,oe)):n.createElement(n.Fragment,null,k("div",{className:P.default.divider}),k(c.default,{className:P.default.searchIcon,onClick:function(){return re(!0)},"aria-label":R.default.Messages.SEARCH},void 0,W),k(p.default,{selectedItem:Q,type:p.Types.TOP_PILL,onItemSelect:X,className:P.default.tabBar},void 0,k(p.Item,{id:g.StatusTab.Active,className:(0,u.default)(P.default.tab,(t={},t[P.default.active]=Q===g.StatusTab.Active,t))},void 0,R.default.Messages.THREAD_BROWSER_ACTIVE),k(p.Item,{id:g.StatusTab.Archived,className:(0,u.default)(P.default.tab,(r={},r[P.default.active]=Q===g.StatusTab.Archived,r))},void 0,R.default.Messages.THREAD_BROWSER_ARCHIVED))):null,k("div",{className:P.default.spacer}),ne?k(s.default,{size:s.default.Sizes.MIN,className:P.default.createButton,onClick:function(){J();S.default.openThreadSidebarForCreating(G,void 0,"Thread Browser Toolbar")}},void 0,R.default.Messages.CREATE):null,k(c.default,{className:P.default.closeIcon,onClick:J,
"aria-label":R.default.Messages.CLOSE},void 0,B)),oe.hasResults?k(M.default,{channel:G,startThread:ue,gotoThread:le,threadIds:oe.results}):Q===g.StatusTab.Active?k(_.default,{channel:G,startThread:ue,gotoThread:le}):k(A.default,{channel:G,startThread:ue,gotoThread:le}))}L.displayName="ThreadBrowser";function x(e){var t=e.query,r=e.setQuery,a=e.submit,n=e.isLoading;return k(v.default,{autoFocus:!0,className:P.default.searchBox,query:t,isLoading:n,onChange:function(e){return r(e)},onClear:function(){return r("")},onKeyDown:function(e){return"Enter"===e.key&&a()}})}x.displayName="SearchBox"},895377:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=y;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){
var l=n?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}a.default=e;r&&r.set(e,a)}(r(667294));var a,n=c(r(956117)),u=c(r(571830)),l=c(r(830759)),o=c(r(971639)),i=c(r(776360)),d=r(819235),f=c(r(247001)),s=c(r(170471));function c(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function p(e,t,r,n){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=n;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var d in u)void 0===t[d]&&(t[d]=u[d]);else t||(t=u||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var h=p(l.default,{width:36,height:36});function y(e){var t=e.channel,r=e.header,a=e.startThread,l=(0,
d.useCanStartPublicThread)(t),c=(0,d.useCanStartPrivateThread)(t);return p("div",{className:s.default.container},void 0,p("div",{className:s.default.iconContainer},void 0,p("div",{className:s.default.icon},void 0,h),p(u.default,{className:s.default.stars})),p(o.default,{className:s.default.header,size:o.default.Sizes.SIZE_24},void 0,r),p(i.default,{color:i.default.Colors.HEADER_SECONDARY,size:i.default.Sizes.SIZE_16},void 0,f.default.Messages.THREAD_BROWSER_EMPTY_STATE_SUBTEXT),l||c?p(n.default,{className:s.default.cta,onClick:a},void 0,f.default.Messages.CREATE_THREAD):null)}y.displayName="ThreadBrowserEmptyState"},903086:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=n?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}a.default=e;r&&r.set(e,a);return a}(r(667294)),u=r(536211),l=r(378158),o=m(r(644263)),i=m(r(737483)),d=m(r(728429)),f=m(r(16941)),s=m(r(971639)),c=m(r(152731)),v=m(r(864061)),p=m(r(330042)),h=r(64072),y=m(r(259869));function m(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function S(e,t,r,n){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=n;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var d in u)void 0===t[d]&&(t[d]=u[d]);else t||(t=u||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,
_owner:null}}function g(){g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};return g.apply(this,arguments)}function T(e,t,r,a,n,u,l){try{var o=e[u](l),i=o.value}catch(e){r(e);return}o.done?t(i):Promise.resolve(i).then(a,n)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var u=e.apply(t,r);function l(e){T(u,a,n,l,o,"next",e)}function o(e){T(u,a,n,l,o,"throw",e)}l(void 0)}))}}var _=n.memo((function(e){var t=e.threadId,a=e.type,i=e.gotoThread,d=e.showChannelName,c=(0,u.useStateFromStores)([o.default],(function(){return o.default.getChannel(t)})),v=(0,u.useStateFromStores)([o.default],(function(){return o.default.getChannel(c.parent_id)}));return S(f.default,{className:y.default.container,onClick:function(e){return i(c,e.shiftKey)},onContextMenu:function(e){return(0,l.openContextMenuLazy)(e,E(regeneratorRuntime.mark((function e(){var t,a
;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return Promise.all([r.e(40532),r.e(9352),r.e(68219),r.e(52328)]).then(r.bind(r,818228));case 2:t=e.sent;a=t.default;return e.abrupt("return",(function(e){return n.createElement(a,g({},e,{channel:c}))}));case 5:case"end":return e.stop()}}),e)}))))}},void 0,S("div",{className:y.default.left},void 0,S(s.default,{className:y.default.threadNameLine,size:s.default.Sizes.SIZE_16},void 0,S("span",{className:y.default.threadName},void 0,c.name),d&&null!=v?S("span",{className:y.default.parentName},void 0,"#"+v.name):null),(0,p.default)(c,a)),S(A,{channel:c}))}));t.default=_;function A(e){var t=e.channel,r=(0,u.useStateFromStores)([v.default],(function(){var e;return null!==(e=v.default.getMemberIdsPreview(t.id))&&void 0!==e?e:[]})),a=(0,u.useStateFromStores)([v.default],(function(){var e;return null!==(e=v.default.getMemberCount(t.id))&&void 0!==e?e:0})),l=(0,
u.useStateFromStoresArray)([d.default],(function(){return r.map((function(e){return d.default.getUser(e)}))}));n.useEffect((function(){r.filter((function(e,t){return null==l[t]})).forEach((function(e){i.default.requestMember(t.guild_id,e)}))}),[]);return 0===r.length?null:S(c.default,{className:y.default.facepile,showDefaultAvatarsForNullUsers:!0,guildId:t.guild_id,users:l,count:a,max:h.MAX_THREAD_MEMBERS_PREVIEW})}A.displayName="Facepile"},330042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.RecentMessageSubtext=C;t.RowType=void 0;t.default=function(e,t){return t===n.Active?P(N,{channel:e}):t===n.AllArchived?P(j,{channel:e}):P(k,{channel:e})};var a,n,u=R(r(667294)),l=w(r(730381)),o=r(536211),i=R(r(538930)),d=r(982437),f=w(r(786661)),s=w(r(116518)),c=w(r(907932)),v=w(r(876874)),p=w(r(191391)),h=w(r(290629)),y=w(r(728429)),m=w(r(830759)),b=r(961365),S=w(r(776360)),g=R(r(35033)),T=w(r(71636)),E=w(r(979674)),_=r(566142),A=w(r(247001)),M=w(r(259869));function w(e){
return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=n?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=e[u]}a.default=e;r&&r.set(e,a);return a}function P(e,t,r,n){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=n;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var d in u)void 0===t[d]&&(t[d]=u[d]);else t||(t=u||{});return{$$typeof:a,type:e,
key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}t.RowType=n;!function(e){e[e.Active=0]="Active";e[e.AllArchived=1]="AllArchived";e[e.MyArchived=2]="MyArchived"}(n||(t.RowType=n={}));function N(e){var t=e.channel,r=(0,o.useStateFromStores)([E.default],(function(){return E.default.getMostRecentMessage(t.id)}));return null==r?P(I,{channel:t}):P(C,{channel:t,message:r})}function I(e){var t=e.channel,r=(0,o.useStateFromStores)([p.default],(function(){return p.default.lastMessageId(t.id)}));return P(S.default,{className:M.default.subtext,size:S.default.Sizes.SIZE_14,color:S.default.Colors.HEADER_SECONDARY},void 0,A.default.Messages.THREAD_BROWSER_NO_RECENT_MESSAGES,"  •  ",(0,_.getTimestampString)(T.default.extractTimestamp(r)))}I.displayName="NoRecentMessageSubtext";function C(e){var t,r=e.channel,a=e.message;(0,d.useSubscribeGuildMembers)(((t={})[r.guild_id]=[a.author.id],t));var n=(0,o.useStateFromStores)([y.default],(function(){var e
;return null!==(e=y.default.getUser(a.author.id))&&void 0!==e?e:a.author})),l=(0,c.default)(a),f=l.nick,v=l.colorString,p=(0,o.useStateFromStores)([h.default],(function(){return h.default.isBlocked(a.author.id)})),m=u.useMemo((function(){var e=null!=a.content&&""!==a.content?(0,s.default)(a,{formatInline:!0}).content:null,t=(0,b.renderSingleLineMessage)(a,e,p,M.default.messageContent,M.default.messageContentIcon),r=t.contentPlaceholder,n=t.renderedContent,l=t.icon;return u.createElement(u.Fragment,null,null!=n?n:P("span",{},void 0,r),l)}),[a,p]);return P(S.default,{className:M.default.subtext,size:S.default.Sizes.SIZE_14,color:S.default.Colors.HEADER_SECONDARY},void 0,P(i.default,{className:M.default.avatar,user:n,size:i.Sizes.SIZE_16}),P("span",{className:M.default.authorName,style:{color:v}},void 0,f,":")," ",m,"  •  ",(0,_.getTimestampString)(T.default.extractTimestamp(a.id)))}C.displayName="RecentMessageSubtext";function j(e){var t=e.channel;return P(D,{channel:t,
timestamp:A.default.Messages.THREAD_BROWSER_ARCHIVE_TIME.format({time:g.calendarFormat((0,l.default)(t.threadMetadata.archiveTimestamp))})})}j.displayName="ArchiveTimeSubtext";function k(e){var t=e.channel;return P(D,{channel:t,timestamp:A.default.Messages.THREAD_BROWSER_CREATION_TIME.format({time:g.calendarFormat((0,l.default)(new Date(T.default.extractTimestamp(t.id))))})})}k.displayName="CreatedTimeSubtext";function D(e){var t,r,a=e.channel,n=e.timestamp;(0,d.useSubscribeGuildMembers)(((t={})[a.guild_id]=[a.ownerId],t));var l=(0,o.useStateFromStores)([y.default],(function(){return y.default.getUser(a.ownerId)})),s=(0,o.useStateFromStores)([v.default],(function(){return v.default.getMember(a.guild_id,a.ownerId)})),c=null!==(r=(0,f.default)(a))&&void 0!==r?r:m.default;return P(S.default,{className:M.default.subtext,size:S.default.Sizes.SIZE_14,color:S.default.Colors.HEADER_SECONDARY},void 0,null==l?u.createElement(u.Fragment,null,P("div",{className:M.default.noAvatarIcon},void 0,P(c,{
width:10,height:10})),n):u.createElement(u.Fragment,null,P(i.default,{className:M.default.avatar,user:l,size:i.Sizes.SIZE_16}),A.default.Messages.THREAD_BROWSER_STARTED_BY.format({authorHook:function(e,t){var r,a;return P("span",{className:M.default.startedByName,style:{color:null!==(r=null==s?void 0:s.colorString)&&void 0!==r?r:void 0}},t," ",null!==(a=null==s?void 0:s.nick)&&void 0!==a?a:l.username)}}),P("span",{className:M.default.bullet},void 0,"•"),n))}D.displayName="StartedBySubtext"}}]);
//# sourceMappingURL=ca908795d70624f861c6.js.map